<?xml version="1.0" encoding="utf-8"?><asx:abap version="1.0" xmlns:asx="http://www.sap.com/abapxml"><asx:values><VERSION>1</VERSION><TYPE/><INTERFACE href="#o822"/><INTERFACET><FPINTERFACET><NAME/><STATE/><LANGUAGE>S</LANGUAGE><ID/><TEXT>Interfase formulario reserva de producci√≥n</TEXT></FPINTERFACET></INTERFACET></asx:values><asx:heap xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:abap="http://www.sap.com/abapxml/types/built-in" xmlns:cls="http://www.sap.com/abapxml/classes/global" xmlns:dic="http://www.sap.com/abapxml/types/dictionary"><cls:CL_FP_INTERFACE_DATA id="o822"><CL_FP_INTERFACE_DATA classVersion="1"><CODING href="#o816"/><PARAMETERS href="#o817"/><GLOBAL_DEFINITIONS href="#o819"/><REFERENCE_FIELDS href="#o821"/><XSD_DEFINITIONS/></CL_FP_INTERFACE_DATA></cls:CL_FP_INTERFACE_DATA><cls:CL_FP_REFERENCE_FIELDS id="o821"><CL_FP_INTERFACE_DATA_CHANGED classVersion="1"><INTERFACE_DATA href="#o822"/></CL_FP_INTERFACE_DATA_CHANGED><CL_FP_REFERENCE_FIELDS classVersion="1"><REFERENCE_FIELDS/></CL_FP_REFERENCE_FIELDS></cls:CL_FP_REFERENCE_FIELDS><cls:CL_FP_GLOBAL_DEFINITIONS id="o819"><CL_FP_INTERFACE_DATA_CHANGED classVersion="1"><INTERFACE_DATA href="#o822"/></CL_FP_INTERFACE_DATA_CHANGED><CL_FP_GLOBAL_DEFINITIONS classVersion="1"><GLOBAL_DATA/><TYPES><FPCLINE>*TYPES: BEGIN OF st_header,</FPCLINE><FPCLINE>*         sociedad TYPE string,</FPCLINE><FPCLINE>*         titulo   TYPE string,</FPCLINE><FPCLINE>*         periodo  TYPE string,</FPCLINE><FPCLINE>*         cifras   TYPE string,</FPCLINE><FPCLINE>*       END OF st_header.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*TYPES: BEGIN OF st_nodos,</FPCLINE><FPCLINE>*         008_rent_imp TYPE char25,</FPCLINE><FPCLINE>*         001_rent_imp TYPE char25,</FPCLINE><FPCLINE>*         002_impt_det TYPE char25,</FPCLINE><FPCLINE>*         0022_impt_det TYPE FINS_VTCUR12,</FPCLINE><FPCLINE>*         011_valo_ret TYPE char25,</FPCLINE><FPCLINE>*         003_sald_pag TYPE char25,</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*         023_sald_imp TYPE char25,</FPCLINE><FPCLINE>*         025_acredita TYPE char25,</FPCLINE><FPCLINE>*         027_sald_sol TYPE char25,</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*         030_impt_pag TYPE char25,</FPCLINE><FPCLINE>*         030_facturas TYPE char25,</FPCLINE><FPCLINE>*       END OF st_nodos.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*TYPES: BEGIN OF st_textos,</FPCLINE><FPCLINE>*         00assets_t     TYPE char100,</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*         008_rent_imp_t TYPE char100,</FPCLINE><FPCLINE>*         001_rent_imp_t TYPE char100,</FPCLINE><FPCLINE>*         002_impt_det_t TYPE char100,</FPCLINE><FPCLINE>*         011_valo_ret_t TYPE char100,</FPCLINE><FPCLINE>*         003_sald_pag_t TYPE char100,</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*         023_sald_imp_t TYPE char100,</FPCLINE><FPCLINE>*         025_acredita_t TYPE char100,</FPCLINE><FPCLINE>*         027_sald_sol_t TYPE char100,</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*         030_impt_pag_t TYPE char100,</FPCLINE><FPCLINE>*         030_facturas_t TYPE char100,</FPCLINE><FPCLINE>*       END OF st_textos.</FPCLINE></TYPES><FIELDSYMBOLS/></CL_FP_GLOBAL_DEFINITIONS></cls:CL_FP_GLOBAL_DEFINITIONS><cls:CL_FP_PARAMETERS id="o817"><CL_FP_INTERFACE_DATA_CHANGED classVersion="1"><INTERFACE_DATA href="#o822"/></CL_FP_INTERFACE_DATA_CHANGED><CL_FP_PARAMETERS classVersion="1"><IMPORT_PARAMETERS><SFPIOPAR><NAME>HEADER</NAME><TYPING>TYPE</TYPING><TYPENAME>ZST_TRIMESTRAL_HEADER</TYPENAME><OPTIONAL>X</OPTIONAL><BYVALUE/><DEFAULTVAL/><STANDARD/><CONSTANT/></SFPIOPAR><SFPIOPAR><NAME>POS_DATA</NAME><TYPING>TYPE</TYPING><TYPENAME>ZST_TRIMESTRAL_DATA</TYPENAME><OPTIONAL>X</OPTIONAL><BYVALUE/><DEFAULTVAL/><STANDARD/><CONSTANT/></SFPIOPAR><SFPIOPAR><NAME>TXT_DATA</NAME><TYPING>TYPE</TYPING><TYPENAME>ZST_TRIMESTRAL_TEXTO</TYPENAME><OPTIONAL>X</OPTIONAL><BYVALUE/><DEFAULTVAL/><STANDARD/><CONSTANT/></SFPIOPAR></IMPORT_PARAMETERS><EXPORT_PARAMETERS/><TABLE_PARAMETERS/><EXCEPTIONS/></CL_FP_PARAMETERS></cls:CL_FP_PARAMETERS><cls:CL_FP_CODING id="o816"><CL_FP_INTERFACE_DATA_CHANGED classVersion="1"><INTERFACE_DATA href="#o822"/></CL_FP_INTERFACE_DATA_CHANGED><CL_FP_CODING classVersion="1"><INPUT_PARAMETERS/><OUTPUT_PARAMETERS/><INITIALIZATION><FPCLINE>**&amp;---------------------------------------------------------------------*</FPCLINE><FPCLINE>**&amp;  C A B E C E R A</FPCLINE><FPCLINE>**&amp;---------------------------------------------------------------------*</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*RANGES: r_fkdat FOR vbrk-fkdat.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*DATA: date_first  TYPE sy-datum,</FPCLINE><FPCLINE>*      date_last   TYPE sy-datum,</FPCLINE><FPCLINE>*      lv_lines    TYPE i,</FPCLINE><FPCLINE>*      month_names TYPE TABLE OF t247.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*CALL FUNCTION 'MONTH_NAMES_GET'</FPCLINE><FPCLINE>*  EXPORTING</FPCLINE><FPCLINE>*    language    = sy-langu</FPCLINE><FPCLINE>*  TABLES</FPCLINE><FPCLINE>*    month_names = month_names.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*READ TABLE month_names INTO DATA(ls_month) WITH KEY mnr = monat+1(2).</FPCLINE><FPCLINE>*IF sy-subrc EQ 0.</FPCLINE><FPCLINE>*  CONCATENATE ls_month-ltx ryear INTO ls_header-periodo SEPARATED BY space.</FPCLINE><FPCLINE>*ENDIF.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*SELECT SINGLE * INTO @DATA(ls_t001) FROM t001</FPCLINE><FPCLINE>* WHERE bukrs = @zrbukrs.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*SELECT SINGLE * INTO @DATA(ls_adrc) FROM adrc</FPCLINE><FPCLINE>* WHERE addrnumber = @ls_t001-adrnr.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*CONCATENATE ls_adrc-name1  ls_adrc-name4</FPCLINE><FPCLINE>*INTO ls_header-sociedad SEPARATED BY space.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*TRANSLATE ls_header-periodo TO UPPER CASE.</FPCLINE><FPCLINE>*ls_header-titulo = 'DETERMINACION DE ISR MENSUAL'.</FPCLINE><FPCLINE>*ls_header-cifras = '(CIFRAS EN QUETZALES)'.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>**&amp;---------------------------------------------------------------------*</FPCLINE><FPCLINE>**&amp;  I M P O R T E S</FPCLINE><FPCLINE>**&amp;---------------------------------------------------------------------*</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*SELECT * FROM i_financialstatementhiernodet INTO TABLE @DATA(lt_financial_node)</FPCLINE><FPCLINE>*WHERE financialstatementhierarchy EQ @versn.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*SELECT * FROM i_financialstatementhiernode INTO TABLE @DATA(lt_financial)</FPCLINE><FPCLINE>*  FOR ALL ENTRIES IN @lt_financial_node</FPCLINE><FPCLINE>*WHERE financialstatementhierarchy EQ @versn</FPCLINE><FPCLINE>*  AND parentnode EQ @lt_financial_node-hierarchynode.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*DELETE lt_financial WHERE parentnode EQ  '00ASSETS'.</FPCLINE><FPCLINE>*DELETE lt_financial WHERE parentnode EQ  '00LIABILITS'.</FPCLINE><FPCLINE>*DELETE lt_financial WHERE parentnode EQ  '0Z006'.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*SELECT * FROM acdoct INTO TABLE @DATA(lt_acdoct)</FPCLINE><FPCLINE>*  FOR ALL ENTRIES IN @lt_financial</FPCLINE><FPCLINE>*  WHERE rldnr EQ @zledger</FPCLINE><FPCLINE>*    AND rbukrs EQ @zrbukrs</FPCLINE><FPCLINE>*    AND ryear EQ @ryear</FPCLINE><FPCLINE>*    AND racct EQ @lt_financial-hierarchynodeval(10).</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*SELECT * FROM zfi_nodo_025 INTO TABLE @DATA(lt_nodo_025)</FPCLINE><FPCLINE>*  WHERE bukrs EQ @zrbukrs</FPCLINE><FPCLINE>*    AND gjahr EQ @ryear</FPCLINE><FPCLINE>*    AND versn EQ @versn</FPCLINE><FPCLINE>*    AND poper EQ @monat.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*LOOP AT lt_financial INTO DATA(ls_financial).</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>**BREAK CONSULABAP05.</FPCLINE><FPCLINE>*  CASE ls_financial-parentnode.</FPCLINE><FPCLINE>*    WHEN '08'.</FPCLINE><FPCLINE>*      LOOP AT lt_acdoct INTO DATA(ls_acdoct) WHERE racct EQ ls_financial-hierarchynodeval.</FPCLINE><FPCLINE>*        CASE monat.</FPCLINE><FPCLINE>*          WHEN 001.</FPCLINE><FPCLINE>*            ls_data-008_rent_imp = ls_data-008_rent_imp + ls_acdoct-hslvt + ls_acdoct-hsl01.</FPCLINE><FPCLINE>*          WHEN 002.</FPCLINE><FPCLINE>*            ls_data-008_rent_imp = ls_data-008_rent_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02.</FPCLINE><FPCLINE>*          WHEN 003.</FPCLINE><FPCLINE>*            ls_data-008_rent_imp = ls_data-008_rent_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03.</FPCLINE><FPCLINE>*          WHEN 004.</FPCLINE><FPCLINE>*            ls_data-008_rent_imp = ls_data-008_rent_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04.</FPCLINE><FPCLINE>*          WHEN 005.</FPCLINE><FPCLINE>*            ls_data-008_rent_imp = ls_data-008_rent_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05.</FPCLINE><FPCLINE>*          WHEN 006.</FPCLINE><FPCLINE>*            ls_data-008_rent_imp = ls_data-008_rent_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06.</FPCLINE><FPCLINE>*          WHEN 007.</FPCLINE><FPCLINE>*            ls_data-008_rent_imp = ls_data-008_rent_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl07.</FPCLINE><FPCLINE>*          WHEN 008.</FPCLINE><FPCLINE>*            ls_data-008_rent_imp = ls_data-008_rent_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl07 + ls_acdoct-hsl08.</FPCLINE><FPCLINE>*          WHEN 009.</FPCLINE><FPCLINE>*            ls_data-008_rent_imp = ls_data-008_rent_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl07 + ls_acdoct-hsl08 + ls_acdoct-hsl09.</FPCLINE><FPCLINE>*          WHEN 010.</FPCLINE><FPCLINE>*            ls_data-008_rent_imp = ls_data-008_rent_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl07 + ls_acdoct-hsl08 + ls_acdoct-hsl09 + ls_acdoct-hsl10.</FPCLINE><FPCLINE>*          WHEN 011.</FPCLINE><FPCLINE>*            ls_data-008_rent_imp = ls_data-008_rent_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl07 + ls_acdoct-hsl08 + ls_acdoct-hsl09 + ls_acdoct-hsl10</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl11.</FPCLINE><FPCLINE>*          WHEN 012.</FPCLINE><FPCLINE>*            ls_data-008_rent_imp = ls_data-008_rent_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl07 + ls_acdoct-hsl08 + ls_acdoct-hsl09 + ls_acdoct-hsl10</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl11 + ls_acdoct-hsl12.</FPCLINE><FPCLINE>*        ENDCASE.</FPCLINE><FPCLINE>*      ENDLOOP.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*    WHEN 011.</FPCLINE><FPCLINE>*      LOOP AT lt_acdoct INTO ls_acdoct WHERE racct EQ ls_financial-hierarchynodeval.</FPCLINE><FPCLINE>*        CASE monat.</FPCLINE><FPCLINE>*          WHEN 001.</FPCLINE><FPCLINE>*            ls_data-011_valo_ret = ls_data-011_valo_ret + ls_acdoct-hslvt + ls_acdoct-hsl01.</FPCLINE><FPCLINE>*          WHEN 002.</FPCLINE><FPCLINE>*            ls_data-011_valo_ret = ls_data-011_valo_ret + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02.</FPCLINE><FPCLINE>*          WHEN 003.</FPCLINE><FPCLINE>*            ls_data-011_valo_ret = ls_data-011_valo_ret + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03.</FPCLINE><FPCLINE>*          WHEN 004.</FPCLINE><FPCLINE>*            ls_data-011_valo_ret = ls_data-011_valo_ret + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04.</FPCLINE><FPCLINE>*          WHEN 005.</FPCLINE><FPCLINE>*            ls_data-011_valo_ret = ls_data-011_valo_ret + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05.</FPCLINE><FPCLINE>*          WHEN 006.</FPCLINE><FPCLINE>*            ls_data-011_valo_ret = ls_data-011_valo_ret + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06.</FPCLINE><FPCLINE>*          WHEN 007.</FPCLINE><FPCLINE>*            ls_data-011_valo_ret = ls_data-011_valo_ret + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl07.</FPCLINE><FPCLINE>*          WHEN 008.</FPCLINE><FPCLINE>*            ls_data-011_valo_ret = ls_data-011_valo_ret + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl07 + ls_acdoct-hsl08.</FPCLINE><FPCLINE>*          WHEN 009.</FPCLINE><FPCLINE>*            ls_data-011_valo_ret = ls_data-011_valo_ret + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl07 + ls_acdoct-hsl08 + ls_acdoct-hsl09.</FPCLINE><FPCLINE>*          WHEN 010.</FPCLINE><FPCLINE>*            ls_data-011_valo_ret = ls_data-011_valo_ret + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl07 + ls_acdoct-hsl08 + ls_acdoct-hsl09 + ls_acdoct-hsl10.</FPCLINE><FPCLINE>*          WHEN 011.</FPCLINE><FPCLINE>*            ls_data-011_valo_ret = ls_data-011_valo_ret + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl07 + ls_acdoct-hsl08 + ls_acdoct-hsl09 + ls_acdoct-hsl10</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl11.</FPCLINE><FPCLINE>*          WHEN 012.</FPCLINE><FPCLINE>*            ls_data-011_valo_ret = ls_data-011_valo_ret + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl07 + ls_acdoct-hsl08 + ls_acdoct-hsl09 + ls_acdoct-hsl10</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl11 + ls_acdoct-hsl12.</FPCLINE><FPCLINE>*        ENDCASE.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*      ENDLOOP.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*    WHEN 023.</FPCLINE><FPCLINE>*      LOOP AT lt_acdoct INTO ls_acdoct WHERE racct EQ ls_financial-hierarchynodeval.</FPCLINE><FPCLINE>*        CASE monat.</FPCLINE><FPCLINE>*          WHEN 001.</FPCLINE><FPCLINE>*            ls_data-023_sald_imp = ls_data-023_sald_imp + ls_acdoct-hslvt + ls_acdoct-hsl01.</FPCLINE><FPCLINE>*          WHEN 002.</FPCLINE><FPCLINE>*            ls_data-023_sald_imp = ls_data-023_sald_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02.</FPCLINE><FPCLINE>*          WHEN 003.</FPCLINE><FPCLINE>*            ls_data-023_sald_imp = ls_data-023_sald_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03.</FPCLINE><FPCLINE>*          WHEN 004.</FPCLINE><FPCLINE>*            ls_data-023_sald_imp = ls_data-023_sald_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04.</FPCLINE><FPCLINE>*          WHEN 005.</FPCLINE><FPCLINE>*            ls_data-023_sald_imp = ls_data-023_sald_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05.</FPCLINE><FPCLINE>*          WHEN 006.</FPCLINE><FPCLINE>*            ls_data-023_sald_imp = ls_data-023_sald_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06.</FPCLINE><FPCLINE>*          WHEN 007.</FPCLINE><FPCLINE>*            ls_data-023_sald_imp = ls_data-023_sald_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl07.</FPCLINE><FPCLINE>*          WHEN 008.</FPCLINE><FPCLINE>*            ls_data-023_sald_imp = ls_data-023_sald_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl07 + ls_acdoct-hsl08.</FPCLINE><FPCLINE>*          WHEN 009.</FPCLINE><FPCLINE>*            ls_data-023_sald_imp = ls_data-023_sald_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl07 + ls_acdoct-hsl08 + ls_acdoct-hsl09.</FPCLINE><FPCLINE>*          WHEN 010.</FPCLINE><FPCLINE>*            ls_data-023_sald_imp = ls_data-023_sald_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl07 + ls_acdoct-hsl08 + ls_acdoct-hsl09 + ls_acdoct-hsl10.</FPCLINE><FPCLINE>*          WHEN 011.</FPCLINE><FPCLINE>*            ls_data-023_sald_imp = ls_data-023_sald_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl07 + ls_acdoct-hsl08 + ls_acdoct-hsl09 + ls_acdoct-hsl10</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl11.</FPCLINE><FPCLINE>*          WHEN 012.</FPCLINE><FPCLINE>*            ls_data-023_sald_imp = ls_data-023_sald_imp + ls_acdoct-hslvt + ls_acdoct-hsl01 + ls_acdoct-hsl02</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl03 + ls_acdoct-hsl04 + ls_acdoct-hsl05 + ls_acdoct-hsl06</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl07 + ls_acdoct-hsl08 + ls_acdoct-hsl09 + ls_acdoct-hsl10</FPCLINE><FPCLINE>*                                      + ls_acdoct-hsl11 + ls_acdoct-hsl12.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*        ENDCASE.</FPCLINE><FPCLINE>*      ENDLOOP.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*  ENDCASE.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*ENDLOOP.</FPCLINE><FPCLINE>**BREAK consulabap05.</FPCLINE><FPCLINE>*ls_data-008_rent_imp = abs( ls_data-008_rent_imp ).</FPCLINE><FPCLINE>*ls_data-011_valo_ret = abs( ls_data-011_valo_ret ).</FPCLINE><FPCLINE>*ls_data-023_sald_imp = abs( ls_data-023_sald_imp ).</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*LOOP AT lt_nodo_025 INTO DATA(ls_nodo_025).</FPCLINE><FPCLINE>*  ls_data-025_acredita = ls_data-025_acredita + ls_nodo_025-monto.</FPCLINE><FPCLINE>*  CONDENSE  ls_data-025_acredita.</FPCLINE><FPCLINE>*ENDLOOP.</FPCLINE><FPCLINE>***</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*LOOP AT lt_financial_node  INTO DATA(ls_financial_node).</FPCLINE><FPCLINE>*  CASE ls_financial_node-hierarchynode.</FPCLINE><FPCLINE>*    WHEN '00ASSETS'.</FPCLINE><FPCLINE>*      ls_texto-00assets_t  = ls_financial_node-hierarchynodetext.</FPCLINE><FPCLINE>*    WHEN '08'.</FPCLINE><FPCLINE>*      ls_texto-008_rent_imp_t = ls_financial_node-hierarchynodetext.</FPCLINE><FPCLINE>*      ls_texto-001_rent_imp_t = 'Renta Imponible'.</FPCLINE><FPCLINE>*    WHEN '011'.</FPCLINE><FPCLINE>*      ls_texto-002_impt_det_t = 'Impuesto Determinado'.</FPCLINE><FPCLINE>*      ls_texto-011_valo_ret_t = ls_financial_node-hierarchynodetext.</FPCLINE><FPCLINE>*      ls_texto-003_sald_pag_t = 'Saldo de Impuesto a Pagar '.</FPCLINE><FPCLINE>*    WHEN '023'.</FPCLINE><FPCLINE>*      ls_texto-023_sald_imp_t = ls_financial_node-hierarchynodetext.</FPCLINE><FPCLINE>*    WHEN '025'.</FPCLINE><FPCLINE>*      ls_texto-025_acredita_t = ls_financial_node-hierarchynodetext.</FPCLINE><FPCLINE>*    WHEN '027'.</FPCLINE><FPCLINE>*      ls_texto-027_sald_sol_t = ls_financial_node-hierarchynodetext.</FPCLINE><FPCLINE>*    WHEN '030 '.</FPCLINE><FPCLINE>*      ls_texto-030_impt_pag_t   = ls_financial_node-hierarchynodetext.</FPCLINE><FPCLINE>*      ls_texto-030_facturas_t = 'Cantidad de Facturas Emitidas incluyendo las anuladas'.</FPCLINE><FPCLINE>*  ENDCASE.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*ENDLOOP.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>**BREAK consulabap05.</FPCLINE><FPCLINE>** ls_data-008_rent_imp                        "Nodo 08</FPCLINE><FPCLINE>*ls_data-001_rent_imp = ls_data-008_rent_imp.  "Nodo 08_2</FPCLINE><FPCLINE>*ls_data-002_impt_det = ( ls_data-008_rent_imp * ( 70 / 1000 ) - 1500 ).   "Nodo 08 Formula 7%-1500</FPCLINE><FPCLINE>*ls_data-0022_impt_det  =  ls_data-002_impt_det.</FPCLINE><FPCLINE>** ls_data-011_valo_ret   "Nodo 011</FPCLINE><FPCLINE>*ls_data-003_sald_pag = ls_data-011_valo_ret - ls_data-011_valo_ret. "Nodo 011 Formula RESTA</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>** ls_data-023_sald_imp    "Nodo 023</FPCLINE><FPCLINE>** ls_data-025_acredita    "Nodo 025</FPCLINE><FPCLINE>*ls_data-027_sald_sol = ls_data-023_sald_imp - ls_data-025_acredita. "Nodo 027 Formula RESTA</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*ls_data-030_impt_pag = ls_data-003_sald_pag - ls_data-025_acredita. "Formula</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*CONDENSE: ls_data-008_rent_imp,</FPCLINE><FPCLINE>*          ls_data-001_rent_imp,</FPCLINE><FPCLINE>*          ls_data-002_impt_det,</FPCLINE><FPCLINE>*          ls_data-011_valo_ret,</FPCLINE><FPCLINE>*          ls_data-003_sald_pag,</FPCLINE><FPCLINE>*          ls_data-023_sald_imp,</FPCLINE><FPCLINE>*          ls_data-025_acredita,</FPCLINE><FPCLINE>*          ls_data-027_sald_sol,</FPCLINE><FPCLINE>*          ls_data-030_impt_pag.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>**&amp;---------------------------------------------------------------------*</FPCLINE><FPCLINE>**&amp;  CO N T A D O R   V B R K</FPCLINE><FPCLINE>**&amp;---------------------------------------------------------------------*</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*CONCATENATE ryear  monat+1(2)  '01'  INTO date_first.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*CALL FUNCTION 'RP_LAST_DAY_OF_MONTHS'</FPCLINE><FPCLINE>*  EXPORTING</FPCLINE><FPCLINE>*    day_in            = date_first</FPCLINE><FPCLINE>*  IMPORTING</FPCLINE><FPCLINE>*    last_day_of_month = date_last.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*APPEND VALUE #( sign   = 'I'</FPCLINE><FPCLINE>*                option = 'BT'</FPCLINE><FPCLINE>*                low    = date_first</FPCLINE><FPCLINE>*                high   = date_last )</FPCLINE><FPCLINE>*                TO  r_fkdat.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*SELECT * FROM vbrk INTO TABLE @DATA(lt_vbrk)</FPCLINE><FPCLINE>*  WHERE gjahr EQ @ryear</FPCLINE><FPCLINE>*    AND bukrs EQ @zrbukrs</FPCLINE><FPCLINE>*    AND fkdat IN @r_fkdat</FPCLINE><FPCLINE>*    AND fksto NE 'X'.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*DESCRIBE TABLE lt_vbrk LINES ls_data-030_facturas.</FPCLINE><FPCLINE>*</FPCLINE><FPCLINE>*CONDENSE ls_data-030_facturas.</FPCLINE></INITIALIZATION><FORMS/></CL_FP_CODING></cls:CL_FP_CODING></asx:heap></asx:abap>